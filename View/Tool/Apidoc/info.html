<?php $this->view('Tool/Public/apidoc_header');?>

<div class="ui text container" style="max-width: none !important;margin-top: 50px;">
    <div class="ui floating message">
        <h2 class='ui header'>接口：<span <?php if (!empty($deprecated)):?>style="text-decoration: line-through"<?php endif;?>><?php echo ($method ? '<a href="'.uri('apidoc/info', $module.'_'.$class.'_'.$method).'">'.$module.'/'.$class.'/'.$method.'</a>' : '--'); ?></span></h2>
        <br/>
        <?php if (!empty($tips)):?>
        <span class='ui teal tag label'>
            <?php echo $tips;?>
        </span>
        <?php endif;?>
        <div class="ui raised segment">
            <span class="ui red ribbon label">接口说明</span>
            <div class="ui message">
                <p> <?php echo ($description ? $description : '');?></p>
                <p> 请求方式：<?php echo ($http_type ? $http_type : 'GET');?></p>
            </div>
        </div>

        <h3>接口参数 (<?php echo ($http_type ? $http_type : 'GET');?>)</h3>
        <table class="ui red celled striped table" >
            <thead>
            <tr>
                <th>参数名称</th>
                <th>是否必须</th>
                <th>说明</th>
            </tr>
            </thead>
            <tbody>
            <?php
                if (!empty($params)) {
                    if (count($params) > 1 || is_array(current($params))) {
                        foreach ($params as $v) {
                            $name = $v['name'];
                            $require = strpos($v['require'], '必') !== false ? '<span style="color:red">必选</span>' : '可选';
                            $desc = isset($v['desc']) ? trim($v['desc']) : '';
                            echo '<tr>';
                            echo '<td>'.$name.'</td>';
                            echo '<td>'.$require.'</td>';
                            echo '<td>'.$desc.'</td>';
                            echo '</tr>';
                        }
                    } else {
                        echo '<tr>';
                        echo '<td colspan="3">'.current($params).'</td>';
                        echo '</tr>';
                    }
                }
            ?>
            </tbody>
        </table>

        <h3>返回结果</h3>
        <table class="ui green celled striped table" >
            <thead>
            <tr>
                <th>类型</th>
                <th>说明</th>
            </tr>
            </thead>
            <tbody>
            <?php
                if (!empty($returns)) {
                    echo '<tr>';
                    echo '<td>'. $returns[0].'</td>';
                    echo '<td>'.$returns[1].'</td>';
                    echo '</tr>';
                }
            ?>
            </tbody>
        </table>
        <div class="ui violet message">
            <p><?php echo ($return ? $return : '');?></p>
        </div>
        <div class="ui blue message">
            <strong>温馨提示：</strong> 此接口参数列表根据后台代码自动生成。
        </div>
    </div>

<?php $this->view('Tool/Public/apidoc_footer');?>