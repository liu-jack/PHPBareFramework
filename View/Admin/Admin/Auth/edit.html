{:view('Public/header')}

<!-- Main content starts -->
<div class="content">
    <div class="matter">

        <div class="widget">
            <div class="widget-head">
                <div class="pull-left">编辑管理组 -- {$group.GroupName}</div>
                <div class="clearfix"></div>
            </div>
            <div class="widget-content">
                <form method="post">
                    <table class="table table-bordered " align="center">
                        <tbody>
                        <!-- 一级菜单 -->
                        {foreach ($menu[0] as $k => $v)}
                        <tr>
                            <td colspan="3" class="col-xs-12">
                                <div class="checkbox">
                                    <label>
                                        <input type="checkbox" {if (isset($auth[$v['Url']]))}checked="checked"{/if} value="{$v.AdminMenuId}" name="menu[]" id="g_{$v.AdminMenuId}"> {$v.Name}
                                    </label>
                                </div>
                            </td>
                        </tr>
                        <!-- 二级菜单 -->
                        {foreach ($menu[$k] as $k2 => $v2)}
                        <tr>
                            <td><div style="width:20px;"></div></td>
                            <td colspan="2" class="col-xs-12">
                                <div class="checkbox">
                                    <label>
                                        <input type="checkbox" {if (isset($auth[$v2['Url']]))}checked="checked"{/if} value="{$v2.AdminMenuId}" name="menu[]" id="g_{$v.AdminMenuId}_{$v2.AdminMenuId}"> {$v2.Name}
                                    </label>
                                </div>
                            </td>
                        </tr>
                        <!-- 三级菜单 -->
                        {foreach ($menu[$k2] as $k3 => $v3)}
                        <tr>
                            <td><div style="width:20px;"></div></td>
                            <td><div style="width:20px;"></div></td>
                            <td colspan="1" class="col-xs-12">
                                <div class="checkbox">
                                    <label>
                                        <input type="checkbox" {if (isset($auth[$v3['Url']]))}checked="checked"{/if} value="{$v3.AdminMenuId}" name="menu[]" id="g_{$v.AdminMenuId}_{$v2.AdminMenuId}_{$v3.AdminMenuId}"> {$v3.Name}
                                    </label>
                                </div>
                            </td>
                        </tr>
                        {/foreach}
                        {/foreach}
                        {/foreach}
                        <tr>
                            <td colspan="4">
                                <button type="submit" class="btn btn-success"><i class="icon-ok"></i></button>
                                <button onclick="history.back()" class="btn btn-danger"><i class="icon-remove"></i></button>
                                <button class="btn btn-warning" onclick="location.reload();return false;"><i class="icon-refresh"></i></button>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </form>
            </div>
        </div>

    </div>
    <!-- Matter ends -->
    <div class="clearfix"></div>
</div>
<!-- Content ends -->
<script type="text/javascript">
    $(".checkbox").on('click', 'input:checkbox', function(){
        var exist = $(this).prop("checked");
        var mid = $(this).attr("id").split("_");
        var id = $(this).attr("id");
        if (exist){
            if (mid.length == 4){
                $("#g_" + mid[1]).prop("checked", true);
                $("#g_" + mid[1] + "_" + mid[2]).prop("checked", true);
            }else if(mid.length == 3){
                $("#g_" + mid[1]).prop("checked", true);
            }
        }else{
            $("input:checkbox[id^='"+id+"']").prop("checked", false);
        }
    });
</script>

{@view('Public/footer')}